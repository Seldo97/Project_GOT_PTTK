{% extends '../baseTemplate.twig' %}

{% block title %}Moje trasy{% endblock %}
{% block header %}
    <strong>Wycieczka {{ wycieczka.getDataOd }} / {{ wycieczka.getDataDo }}</strong>
{% endblock %}
{% block main %}
    <div class="text-justify"
         style="max-width: 35%; -webkit-hyphens: auto; -ms-hyphens: auto; hyphens: auto; word-wrap: break-word;">
        <p>{{ wycieczka.getOpis }}</p>
    </div>

    <h3 class="mt-5">PrzeglƒÖd zaplanowanych tras:</h3>

    <table id="myTable" class="table table-striped align-middle table-sm">
        <thead class="thead-dark">
        <tr>
            <th scope="col" width="20px">#</th>
            <th scope="col">Opis</th>
            <th scope="col">Pasmo</th>
            <th scope="col">Data</th>
            <th scope="col">Suma pkt</th>
            <th scope="col">Zrealizowana</th>

            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>

        {% set i = 1 %}
        {% for trasa in trasy %}
            <tr>
                <td>{{ i }}</td>
                <td>
                    <div style='max-height: 65px; width: 135px; word-wrap: break-word; overflow-x: auto;'>{{ trasa.getOpis }}</div>
                </td>
                <td>{{ trasa.getPasmo.getNazwa }}</td>
                <td>{{ trasa.getData }}</td>
                {% if trasa.getDubel == 0 %}
                    <td>{{ trasa.getSuma_punktow }}</td>
                {% else %}
                    <td>{{ trasa.getSuma_punktow }} <abbr
                                title="Twoja trasa zawiera zdublowane odcinki i nie mo≈ºe byƒá brana pod uwagƒô podczas punktacji">‚ùó</abbr>
                    </td>
                {% endif %}
                {% if  trasa.getZrealizowana == 0 %}
                    <td class="text-center"><a class="btn" href="/trasa/zrealizuj/{{ trasa.getIdTrasa }}">üî≤</a></td>
                {% else %}
                    <td class="text-center"><a class="btn" href="/trasa/zrealizuj/{{ trasa.getIdTrasa }}">‚úÖ</a></td>
                {% endif %}
                <td class="text-right">
                    <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
                        <abbr title="Konfiguruj odcinki trasy"><a class="btn btn-sm btn-dark" href="#">Konfiguruj
                                odcinki</a></abbr>
                        <abbr title="Edytuj"><a class="btn btn-sm bg-transparent"
                                                href="/trasa/form/{{ trasa.getIdTrasa }}">‚úèÔ∏è</a></abbr>
                        <abbr title="Usu≈Ñ"><a class="btn btn-sm bg-transparent"
                                              href="/trasa/usun/{{ trasa.getIdTrasa }}">üóëÔ∏è</a></abbr>
                    </div>
                </td>
            </tr>
            {% set i = i + 1 %}
        {% endfor %}
        {% set i = 1 %}
        </tbody>
    </table>
    <button class="btn btn-info" id="toggleButton" role="button">Nowa trasa üë£</button>
    <a class="btn btn-dark" href="/ksiazeczka/MojaKsiazeczka" role="button">Powr√≥t</a>
    <div id="trasaForm" style="display: none">

        <div class="row">
            <div class="col-12 col-md-6 mt-3" id="form">

                <form id="addForm" action="/trasa/wycieczki/dodaj_odcinek" method="POST">

                    <div class="form-group">
                        <label for="pasmo">Wybierz pasmo g√≥rskie:</label>
                        <select name="pasmo" class="form-control" required>
                            <option value="">--Wybierz pasmo--</option>
                            {% for grupa in grupy %}
                                <optgroup label="{{ grupa.getNazwa }}">

                                    {% for pasmo in grupa.getPasmo %}
                                        <option value="{{ pasmo.getIdPasmo }}">{{ pasmo.getNazwa }}</option>
                                    {% endfor %}

                                </optgroup>
                            {% endfor %}

                        </select>
                    </div>

                    <div class="form-group">
                        <label for="data">Wybierz datƒô:</label>
                        <input class="form-control" type="date" id="data" name="data"
                               min="{{ wycieczka.getDataOd }}" max="{{ wycieczka.getDataDo }}" required>
                    </div>
                    <div class="form-group">
                        <label for="opis">Opis:</label>
                        <textarea class="form-control" id="opis" name="opis" required></textarea>
                    </div>

                    <input type="hidden" id="wycieczka" name="wycieczka" value="{{ wycieczka.getIdWycieczka }}">
                    <input type="hidden" id="zrealizowana" name="zrealizowana" value="0">
                    <input type="hidden" id="dubel" name="dubel" value="0">
                    <input type="hidden" id="suma_punktow" name="suma_punktow" value="0">

                    <button type="submit" class="btn btn-info">Utw√≥rz +</button>
                </form>

            </div>
        </div>

    </div>

{% endblock %}